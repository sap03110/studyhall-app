## 📔 독서실 통합 관리 시스템 '스터디홀(StudyHall)'

<img src="https://user-images.githubusercontent.com/57428261/150647149-a41b43fc-572d-4371-85ed-4b3ade30cc14.png" alt="제목을 입력해주세요_-001" align="center" style="width: 25%;" />

 독서실 통합 관리 시스템 `스터디홀(StudyHall)`은 기존 독서실 시스템의 소음 및 온도 조절 등에 대한 불편 해결 방안의 부족함과 자리 배석 및 자리 이동 시 안내 데스크를 거쳐야 하는 번거로움, 등록 대기 회원 및 시설물 관리 등과 독서실 프로그램의 분리로 겪는 예약 누락 및 관리의 불편함을 개선하고 사용자가 학습에 집중할 수 있도록 다양한 학습 편의 기능을 제공합니다.



#### 🎈 팀 이름

StudyHall



#### 👨‍👧‍👧 팀원

- 20165689 안우진
- 20166228 김미정
- 20166675 박동한



#### ⚒ 사용 기술

- Android Studios 3.3.2
- JDK 11.0.2
- Google Firebase



#### 🚀 DB 설계

- 사용자 정보(USER)

  <img src="https://user-images.githubusercontent.com/57428261/150644917-afa5cbb9-23d8-4f45-bc8a-3bf66afb1472.png" alt="image" style="width:80%;" />

  - user_id : 회원의 핸드폰 번호를 ID로 사용
  - password : 회원의 사물함 비밀번호 혹은 임의값을 비밀번호로 사용
  - name : 회원의 이름
  - branch : 사용할 StudyHall의 지점명
  - start_date : 이용 시작 날짜
  - end_date : 이용 종료 날싸
  - seat_id : 지정석 회원의 자리 id값, 자유석의 경우 -1
  - reg_ID : 로그인 상태 유지(자동 로그인) 구현을 위한 회원의 기기 id값
  - user_or_admin : 회원 혹은 관리자 식별에 사용 (0: 회원, 1: 관리자)
  
- 컴플레인 메시지(CMP)

  ![1111](https://user-images.githubusercontent.com/57428261/150644963-51e8cc02-2926-43ee-9f66-52bb6e4694c5.png)

  - 이용자들이 주고 받은 CMP(컴플레인)을 저장하며, 월 별로 나누어서 관리
  - day : 보낸 날짜 (8자리)
  - reason : 컴플레인 이유
  - reciver : 받는 회원의 user_id
  - sender : 보낸 회원의 user_id
  - time : 보낸 시간 (시, 분, 초)
  
- 현재 입실 중인 사용자(CURRENT)

  ![1111](https://user-images.githubusercontent.com/57428261/150647025-0458dd59-72b6-4525-9a54-76f5e8fd907f.png)

  - floor : 해당 회원이 이용 중인 층
  - room : 해당 회원이 이용 중인 열람실 이름
  - key : 해당 회원이 이용 중인 자리의 key값
  - user_id : 입실 중인 회원의 user_id
  - reg_id : 입실 중인 회원이 사용 중인 기기 id값
  
- 독서실 좌석 정보(SEAT)

  <img src="https://user-images.githubusercontent.com/57428261/150646499-63faa0f2-38a3-4758-8e39-5efdea6215a2.png" alt="image" style="width:67%;" />

  - 해당 독서실의 좌석 정보를 담고 있는 DB, floor(해당 독서실이 점유하고 있는 층) 와 room(각 층에 위치하는 열람실의 이름)으로 나누어서 관리
  - row : 좌석표 상의 row값
  - col : 좌석표 상의 column값
  - state : 좌석의 상태값 (1: 복도 및 벽, 2: 빈 자유석, 3: 점유된 자유석, 4: 입구, 5: 빈 지정석, 6: 점유된 지정석)

- 독서실 시설물(FACILITY)

  ​	![1111](https://user-images.githubusercontent.com/57428261/150646475-0e461847-1c31-40c3-946e-819ab8c8fad5.png)

  - 해당 독서실 지점의 시설물 정보 저장
  - facility_id : 시설물의 고유한 id값, 0부터 시작
  - facility_name : 시설물 이름

- 입/퇴실 로그(LOG)

  ​	![1111](https://user-images.githubusercontent.com/57428261/150646456-a0321485-5e2a-49c9-bfe7-d9ae1675fee2.png)

  - 회원의 입/퇴실 기록이 저장된 테이블로, 일자로 나누어서 관리, 학습 보조 기능에 사용됨
  - date : 해당 날짜 (8자리)
  - user_id : 해당 이용자의 user_id
  - start_time : 입실 시각
  - end_time : 퇴실 시각

- 시설물 예약 정보(RESERVATION)

  ![1111](https://user-images.githubusercontent.com/57428261/150646528-0a652e63-27c7-4ec3-b44e-1613c70cea80.png)

  - date : 예약하려는 날짜 (8자리)
  - facility_id : 예약하려는 시설물의 id
  - user_id : 예약한 회원의 user_id
  - name : 예약한 회원의 이름
  - start_time : 예약 시작 시간
  - end_time : 예약 종료 시간



#### 🎁 구현 기능

##### ✨ 사용자 기능

##### 로그인

<img src="https://user-images.githubusercontent.com/57428261/150646576-037211ce-1502-4062-9aad-08bea4db2d58.png" alt="1111" style="width: 35%" />

- 소셜 로그인
  - 로그인
    - 아이디 및 비밀번호 입력 후 로그인 클릭
    - 로그인 상태 유지 체크 시 해당 이용자의 기기 id값이 DB에 저장되어 다음 어플리케이션 실행부터 자동 로그인 제공
- 비회원 로그인
  - 로그인 절차 없이 간단히 버튼 하나만 클릭하여 이용 가능



##### 메인

| <img src="https://user-images.githubusercontent.com/57428261/150646639-614b917b-ee6b-435d-bbfe-543b5a282138.png" alt="1111" style="width:50%;" /><img src="https://user-images.githubusercontent.com/57428261/150646699-671d2723-f96c-4890-beb5-dbb5109cd256.png" alt="2222" style="width:50%;" /> |
| :----------------------------------------------------------: |

- 회원 정보 조회
  - 사용 기간 및 자유석/지정석 여부를 확인할 수 있다.
  - 입실
    - 블루투스 기능을 이용하여 사용자의 스마트폰 기기가 독서실의 비콘 범위 내에 들 어와야 버튼이 활성화되어 입실이 가능하며, 자유석 회원의 경우 층 및 열람실을 선 택 후 입실하고자 하는 자리를 클릭하면 입실이 가능하다. 지정석 회원의 경우 자리 선택 화면으로 이동하지 않고 입실이 가능하다.
  - 퇴실
    - 입실과는 달리 간단히 버튼만 클릭하여 퇴실이 가능하다.
  - 자리 이동
    - 입실과 마찬가지로 독서실의 블루투스 비콘 범위 내에 들어와야 활성화되며, 층 및 열람실을 선택 후 이동하고자 하는 자리를 클릭하면 자리 이동이 가능하다.



##### 컴플레인

| <img src="https://user-images.githubusercontent.com/57428261/150646731-7c737db3-b5c6-4149-82af-b0f03038b871.png" alt="1111" style="width:50%;" /><img src="https://user-images.githubusercontent.com/57428261/150646736-5ad98b18-7157-41cd-a428-34fc3ffec77f.png" alt="2222" style="width:50%;" /> |
| :----------------------------------------------------------: |

- CMP 전송

  - 메시지를 보내고자 하는 소음 유발자와 이유를 선택한 후 보내기 버튼을 클릭하면 해당 회원에게 푸시 알림이 전송된다.
- 관리자에게 메시지 보내기
  - 입실 중인 열람실의 입실자가 3인 이하일 경우 관리자에게 불편 사항을 메시지로 보낼 수 있는 기능을 제공한다. 메시지는 `current_admin_regID`에 저장된 값을 기기 id값으로 갖는 관리자의 스마트폰에 푸시 형태로 전송된다.



##### 학습 보조

| <img src="https://user-images.githubusercontent.com/57428261/150646765-b8ac0cf9-c3a6-4923-8d8a-31fd9bebc221.png" alt="1111" style="width:50%;" /><img src="https://user-images.githubusercontent.com/57428261/150646781-d5b4a316-8a7e-4231-8599-a1c2d165b8ea.png" alt="2222" style="width:50%;" /> |
| :----------------------------------------------------------: |

- 디데이 설정
  - `SharedPreferences.Editor`를 이용하여 어플리케이션 내부에 저 장하여 액티비티 실행 시 마지막으로 저장된 데이터를 불러온다.
- 순공시간 조회
  - 근접센서를 이용하여 화면이 켜진 상태에서는 타이머가 작동하지 않고 핸드폰을 뒤집어 놓았을 때만 타이머가 작동하며, 효율적인 학습시간 관리를 돕고 핸드폰을 멀리할 기회를 제공한다.
- 타이머
  - 초를 입력하여 일반적인 타이머로도 사용이 가능하고, 하단의 스피너를 이용하여 시험 종류를 선택하면 해당 시험의 카운트로 자동 세팅되어 편리하게 이용 가능하 다.



##### 시설물 예약

| <img src="https://user-images.githubusercontent.com/57428261/150646801-2991a126-2de0-4c35-a17b-e27abb331f16.png" alt="1111" style="width:50%;" /><img src="https://user-images.githubusercontent.com/57428261/150646811-9e5eb1a7-e83c-4834-8966-e30a7964e66c.png" alt="2222" style="width:50%;" /> |
| :----------------------------------------------------------: |

- 예약 조회
  - 상단의 예약 날짜 영역을 클릭하여 원하는 날짜를 선택하여 해당 독서실의 시설물 리스트와 각 시설물에 해당하는 예약 타임테이블 조회가 가능하다.
- 예약하기
  - 원하는 날짜와 시설물을 지정 후 예약하기 버튼을 클릭하여 예약 시작 시간 및 종 료 시간을 설정한 후 버튼을 눌러 손쉽게 예약이 가능하다. 시작 시간보다 종료 시 간이 작을 경우나, 이미 예약된 시간으로 설정 시 토스트 알람으로 경고를 주는 방 식으로 예외 처리를 했다. 



##### ✨ 비회원 기능

<img src="https://user-images.githubusercontent.com/57428261/150646841-5df75359-438d-4d38-b4a3-a4583aa88d02.png" alt="1111" style="width:35%;" />

###### 좌석표 열람

- 조회하고자 하는 층 및 열람실을 선택 후 탐색(새로고침) 버튼 클릭하여 각 지점의 좌석표를 열람할 수 있다.



###### 시설물 예약

- 예약 조회
  - 상단의 예약 날짜 영역을 클릭하여 원하는 날짜를 선택하여 해당 독서실의 시설물 리스트와 각 시설물에 해당하는 예약 타임테이블 조회가 가능하다.
- 시설물 예약
  - 원하는 날짜와 시설물을 지정 후 예약하기 버튼을 클릭하여 예약 시작 시간 및 종 료 시간과 핸드폰 번호를 입력하여 비회원도 손쉽게 예약이 가능하다. 예약과 마찬 가지로 예외처리도 회원과 동일하게 이루어진다.



##### ✨ 관리자 기능

###### 메인

| <img src="https://user-images.githubusercontent.com/57428261/150646885-ab21bc9d-6c1c-408b-8839-2f0dbbaa2021.png" alt="1111" style="width:50%;" /><img src="https://user-images.githubusercontent.com/57428261/150646892-988cbbc8-291f-4b5b-8320-794ebb75ddf4.png" alt="2222" style="width:50%;" /> |
| ------------------------------------------------------------ |

- 입퇴실 관리
  - 층 및 열람실을 선택 후 탐색(새로고침) 버튼 클릭 후, 입실 된 좌석 중 퇴실시키 고자 하는 좌석을 클릭하여 퇴실 처리를 할 수 있다.

- 이용자 관리
  - 회원 검색 및 조회
    - 회원의 핸드폰 번호인 user_id를 이용하여 검색이 가능하며, 검색창에 입력한 숫자 를 포함하는 회원의 리스트를 조회할 수 있다. 검색창이 비어있을 시에는 모든 회원 들의 리스트를 조회할 수 있다.
  - 회원 추가
    - 회원의 핸드폰 번호인 user_id를 이용하여 검색이 가능하며, 검색창에 입력한 숫자 를 포함하는 회원의 리스트를 조회할 수 있다. 검색창이 비어있을 시에는 모든 회원 들의 리스트를 조회할 수 있다.
  - 회원 수정 및 삭제
    - 회원  리스트에서  수정하고자  하는  회원을  클릭하면  수정  화면으로  이동하며 user_id를 제외한 비밀번호, 이름, 좌석 유형(지정석의 경우에는 좌석 번호 입력 必), 등록 기간을 수정할 수 있다. 오른쪽 상단의 삭제 버튼을 누르면 뜨는 다이얼로그를 통해 삭제가 가능하다.

- 시설물 관리
  - 시설물 조회
    - 현재 제공하는 시설물의 번호와 이름을 포함한 리스트 조회가 가능하다.
  - 시설물 추가
    - 오른쪽 상단의 추가 버튼을 누른 후 추가하려는 시설물 이름을 입력하면 새로운 시설물 추가가 가능하다.
  - 시설물 삭제
    - 리스트 내에 삭제하려는 시설물을 스와이프하면 뜨는 다이얼로그를 통해 삭제가 가능하다.

- 열람실 관리
  - 열람실 추가
    - 층 선택 후 열람실 추가 버튼을 누르면 뜨는 다이얼로그를 통해 추가하고자 하는 열람실 이름과 배치도 크기를 입력하면 추가할 수 있는 화면으로 이동한다. 추가 버 튼 아래에 위치한 복도, 좌석, 입구 버튼을 클릭하여 해당하는 요소들을 배치도에 추가한 후, 저장 버튼을 누르면 추가가 완료된다. 
  - 열람실 제거
    - 층 및 제거하고자 하는 열람실 선택 후 버튼을 누르면 뜨는 다이얼로그를 통해 열 람실 삭제가 가능하다.
  - 작업 취소 및 갱신
    - 열람실 추가 작업 중에 클릭하면 현재 진행 중인 작업을 취소할 수 있다.



###### 컴플레인

<img src="https://user-images.githubusercontent.com/57428261/150646936-78cfe1fa-4c69-4d34-a578-f536a4f13402.png" alt="1111" style="width:35%;" />

- 회원이 ‘CMP’ 기능을 통해 보낸 메시지들을 월별로 조회가 가능하도록 리스트를 제공한다.

  

###### 메시지 관리

<img src="https://user-images.githubusercontent.com/57428261/150646948-5daa1bc4-427f-42d0-b14a-3c4d1fd09344.png" alt="2222" style="width:35%;" />

- 회원이 ‘관리자에게 메시지 보내기’ 기능을 통해 보낸 메시지들을 월별로 조회가 가능하도록 리스트를 제공한다.



###### 블랙리스트

<img src="https://user-images.githubusercontent.com/57428261/150646959-8186f0ec-a767-4e02-ab36-16477df6bbbe.png" alt="3333" style="width:35%;" />

- CMP 기능을 통해 월별로 컴플레인을 받은 횟수를 회원별 리스트로 제공하여 블랙 리스트 관리에 도움을 준다.



<br>

**더 자세한 내용은 [여기](https://github.com/guiyomj/studyhall-app/blob/master/capstone_8_report.pdf)를 참고해 주세요!**